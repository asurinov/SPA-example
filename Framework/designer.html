<!DOCTYPE html>
<html ng-app="designer">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Object designer</title>
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <link href="Content/font-awesome.min.css" rel="stylesheet" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans&subset=cyrillic,latin' rel='stylesheet' type='text/css'>
    <link href="app/designer/designer.css" rel="stylesheet" />
    <link href="bower_components/angular-dnd-module/css/stylesheet.css" rel="stylesheet" />
    
    <script src="Scripts/jquery-2.1.4.min.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
    <script src="Scripts/angular.min.js"></script>
    <script src="Scripts/angular-animate.min.js"></script>
    <script src="Scripts/angular-route.min.js"></script>
    <script src="Scripts/angular-ui/ui-bootstrap-tpls.min.js"></script>
    <script src="Scripts/ngStorage.min.js"></script>
    <script src="bower_components/angular-dnd-module/dist/angular-dnd.js"></script>

    <script src="app/designer/designerModule.js"></script>
    <script src="app/designer/designerController.js"></script>

</head>
<body class="container-fluid" ng-controller="designerController">
    <div class="row">
        <div class="col-md-3">
            <h3>Registry</h3>
            <div class="well" ng-repeat="reg in registry" ng-click="selectRegistry(reg)" ng-class="{'selected' : selectedRegistry.id === reg.id}"
                 dnd-draggable dnd-model="reg" dnd-draggable-opts="{ helper: 'clone', handle: '.handle', layer: 'registry'}"
                 dnd-droppable="" dnd-droppable-opts="{layer: 'registry'}" dnd-on-drop="dropCallback($dragmodel)">
                <i class="fa fa-2x fa-bars handle"></i>
                <i class="fa fa-2x" ng-class="{'fa-folder' : reg.type === 'registry-folder', 'fa-newspaper-o' : reg.type === 'registry-item'}"></i>
                <span>{{reg.name}}</span>
                <span class="counter pull-right" ng-if="reg.type === 'registry-folder' && reg.children">{{reg.children.length}}</span>
            </div>
        </div>
        <div class="col-md-6">
            <h3>Parameters</h3>
            <div class="form-inline">
                <div class="form-group">
                    <input type="text" class="form-control" ng-model="item.name" />
                    <select class="form-control" ng-options="type.name for type in types track by type.id" ng-model="item.type"></select>
                    <button class="btn btn-primary" ng-disabled="!canAdd()" ng-click="add()">Добавить</button>
                </div>
            </div>
            <div class="parameter" ng-repeat="field in selectedRegistry.parameters" dnd-sortable>
                <div class="form-inline">
                    <div class="form-group">
                        <i class="fa fa-2x fa-bars handle"></i>
                        <input type="text" class="form-control" ng-model="field.name" />
                        <select class="form-control" ng-options="type.name for type in types track by type.id" ng-model="field.type"></select>
                        <i class="fa fa-remove" ng-click="removeParam($index)"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <ul class="nav nav-tabs nav-justified">
                <li role="presentation" class="active"><a href="#">Home</a></li>
                <li role="presentation"><a href="#">Profile</a></li>
                <li role="presentation"><a href="#">Messages</a></li>
            </ul>
        </div>
    </div>
</body>
</html>
